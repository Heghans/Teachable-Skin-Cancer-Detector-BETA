<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Detección Educativa de Lesiones en Piel</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Teachable Machine image lib -->
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
</head>
<body class="bg-slate-100 min-h-screen">
  <header class="bg-slate-900 text-white py-4">
    <div class="max-w-4xl mx-auto px-4 flex items-center justify-between">
      <h1 class="text-lg font-semibold">Detector educativo de lesiones en piel</h1>
      <p class="text-xs text-slate-300">Solo con fines demostrativos</p>
    </div>
  </header>

  <main class="max-w-4xl mx-auto px-4 py-8 space-y-6">
    <!-- Intro -->
    <section class="bg-white p-5 rounded-xl shadow">
      <h2 class="text-xl font-semibold mb-2">Sube una imagen</h2>
      <p class="text-sm text-slate-600">
        Sube una foto de la piel para que el modelo (entrenado en Teachable Machine) haga una clasificación básica.
        <span class="font-semibold text-red-500">No es un diagnóstico médico.</span>
      </p>
    </section>

    <!-- Upload + preview -->
    <section class="bg-white p-5 rounded-xl shadow flex flex-col md:flex-row gap-6">
      <div class="flex-1">
        <label
          for="imageUpload"
          class="block text-sm font-medium text-slate-700 mb-2"
        >Imagen de entrada</label>
        <input
          id="imageUpload"
          type="file"
          accept="image/*"
          class="block w-full text-sm text-slate-700
                 file:mr-4 file:py-2 file:px-4
                 file:rounded-md file:border-0
                 file:text-sm file:font-semibold
                 file:bg-slate-900 file:text-white
                 hover:file:bg-slate-700"
        />
        <p class="text-xs text-slate-500 mt-2">
          Usa imágenes claras, bien enfocadas y con buena iluminación.
        </p>
        <button
          id="analyzeBtn"
          class="mt-4 inline-flex items-center gap-2 bg-slate-900 text-white text-sm font-medium px-4 py-2 rounded-md disabled:opacity-60"
          disabled
        >
          Analizar imagen
        </button>
      </div>
      <div class="flex-1">
        <p class="text-sm text-slate-700 mb-2">Vista previa</p>
        <div class="bg-slate-100 border border-dashed border-slate-300 rounded-lg aspect-video flex items-center justify-center overflow-hidden">
          <img id="preview" src="" alt="preview" class="w-full h-full object-contain hidden" />
          <span id="noPreview" class="text-slate-400 text-sm text-center px-4">
            No hay imagen cargada
          </span>
        </div>
      </div>
    </section>

    <!-- Resultados -->
    <section class="bg-white p-5 rounded-xl shadow space-y-4">
      <h2 class="text-lg font-semibold text-slate-800">Resultado</h2>
      <p id="resultText" class="text-sm text-slate-600">
        Aún no se ha analizado ninguna imagen.
      </p>

      <!-- Barra de sospecha -->
      <div>
        <label class="text-xs text-slate-500 mb-1 block">Nivel de sospecha relativa</label>
        <div class="w-full bg-slate-200 rounded-full h-3">
          <div id="susBar" class="bg-red-500 h-3 rounded-full transition-all duration-500" style="width: 0%;"></div>
        </div>
        <p id="susLabel" class="text-xs text-slate-500 mt-1">0%</p>
      </div>

      <!-- Tabla de clases -->
      <div>
        <h3 class="text-sm font-semibold mb-2">Clases detectadas</h3>
        <ul id="classList" class="text-sm text-slate-600 space-y-1"></ul>
      </div>
    </section>

    <!-- Disclaimer -->
    <section class="bg-yellow-50 border border-yellow-200 text-yellow-900 p-4 rounded-lg text-sm">
      <strong>Importante:</strong> Este sistema usa un modelo de clasificación de imágenes y no reemplaza una valoración médica, dermatológica ni biopsia. Para cualquier lesión, lunar cambiante, sangrado o molestia, consulte a un profesional.
    </section>
  </main>
<!-- Cargar TensorFlow y Teachable Machine antes de tu script -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
<script src="./src/js/main.js"></script>
</body>
</html>
